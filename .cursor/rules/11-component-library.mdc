# 11 - Component Library

**React Component Specifications**

This document provides detailed specifications for all React components in the Aldi Meal Planner 2.0.

---

## ğŸ“¦ Component Overview

### Core Components
1. **DaysSelector** - Number input for meal plan duration
2. **ConversationUI** - AI conversation display
3. **GroceryList** - Grocery list with print functionality
4. **RecipeCard** - Individual recipe display
5. **LoadingSpinner** - Loading state indicator

---

## ğŸ¯ DaysSelector Component

### Purpose
Primary input component. User selects number of days for meal plan.

### Props
```typescript
interface DaysSelectorProps {
  value: number;              // Current selected days (1-14)
  onChange: (days: number) => void;
  onSubmit: () => void;       // Trigger meal plan generation
  disabled?: boolean;         // Disable during generation
  min?: number;               // Minimum days (default: 1)
  max?: number;               // Maximum days (default: 14)
}
```

### Features
- âœ… Number input (1-14 days)
- âœ… Voice input support
- âœ… Keyboard navigation
- âœ… Screen reader optimized
- âœ… Default value: 7 days
- âœ… Visual feedback

### Accessibility
- **ARIA Label**: "Select number of days for meal plan"
- **Keyboard**: Tab to focus, Enter to submit
- **Voice**: "seven days" â†’ 7
- **Screen Reader**: Announces value changes

### Example Usage
```jsx
<DaysSelector
  value={days}
  onChange={setDays}
  onSubmit={handleGenerate}
  disabled={isGenerating}
/>
```

### Implementation Notes
- Use `<input type="number">` with proper constraints
- Add voice input button next to input
- Show visual feedback on change
- Validate input range (1-14)

---

## ğŸ’¬ ConversationUI Component

### Purpose
Displays AI conversation messages during meal plan generation.

### Props
```typescript
interface ConversationUIProps {
  messages: Message[];        // Array of conversation messages
  isGenerating: boolean;      // Show loading state
}

interface Message {
  id: string;
  role: 'user' | 'assistant';
  content: string;
  timestamp: Date;
}
```

### Features
- âœ… Message bubbles (user/assistant)
- âœ… Loading indicator during generation
- âœ… Smooth animations
- âœ… Auto-scroll to latest message
- âœ… Accessible live regions

### Accessibility
- **ARIA Live**: "polite" for status updates
- **Screen Reader**: Announces new messages
- **Keyboard**: Focus management

### Example Usage
```jsx
<ConversationUI
  messages={conversationMessages}
  isGenerating={isGenerating}
/>
```

### Message Flow
1. User: "7 days"
2. Assistant: "Got it! Generating your 7-day meal plan..."
3. Assistant: "I'm selecting recipes with good variety..."
4. Assistant: "Your meal plan is ready!"

---

## ğŸ›’ GroceryList Component

### Purpose
Displays aggregated grocery list with print functionality.

### Props
```typescript
interface GroceryListProps {
  items: GroceryItem[];       // Grocery items grouped by category
  totalCost: number;          // Total cost
  onPrint: () => void;         // Print handler
}

interface GroceryItem {
  id: string;
  name: string;
  quantity: number;
  unit: string;
  category: string;
  cost: number;
}
```

### Features
- âœ… Grouped by category
- âœ… Print-optimized layout
- âœ… Total cost display
- âœ… Checkboxes for shopping
- âœ… Print button
- âœ… Keyboard accessible

### Accessibility
- **ARIA Label**: "Grocery list for meal plan"
- **Keyboard**: Tab through items, Enter to print
- **Screen Reader**: Announces categories and items

### Example Usage
```jsx
<GroceryList
  items={groceryItems}
  totalCost={totalCost}
  onPrint={handlePrint}
/>
```

### Print Styling
- Use `@media print` styles
- Hide non-essential elements
- Optimize layout for paper
- Include total cost

---

## ğŸ½ï¸ RecipeCard Component

### Purpose
Displays individual recipe information (expandable).

### Props
```typescript
interface RecipeCardProps {
  recipe: Recipe;
  isExpanded?: boolean;
  onToggleExpand?: () => void;
}

interface Recipe {
  id: string;
  name: string;
  category: string;
  cost: number;
  servings: number;
  ingredients: Ingredient[];
  instructions: string;
  imageUrl?: string;
}
```

### Features
- âœ… Collapsible details
- âœ… Cost per serving
- âœ… Ingredient list
- âœ… Instructions
- âœ… Image (if available)
- âœ… Category badge

### Accessibility
- **ARIA Expanded**: Toggle state
- **Keyboard**: Enter/Space to expand
- **Screen Reader**: Announces recipe details

### Example Usage
```jsx
<RecipeCard
  recipe={recipe}
  isExpanded={expandedRecipeId === recipe.id}
  onToggleExpand={() => setExpandedRecipeId(recipe.id)}
/>
```

---

## â³ LoadingSpinner Component

### Purpose
Shows loading state during meal plan generation.

### Props
```typescript
interface LoadingSpinnerProps {
  message?: string;            // Optional loading message
  size?: 'small' | 'medium' | 'large';
}
```

### Features
- âœ… Animated spinner
- âœ… Optional message
- âœ… Respects `prefers-reduced-motion`
- âœ… Accessible to screen readers

### Accessibility
- **ARIA Live**: Announces loading state
- **Reduced Motion**: Static indicator if motion disabled

### Example Usage
```jsx
<LoadingSpinner message="Generating your meal plan..." />
```

---

## ğŸ¨ Shared UI Components

### Button Component

```typescript
interface ButtonProps {
  children: React.ReactNode;
  onClick: () => void;
  variant?: 'primary' | 'secondary' | 'ghost';
  size?: 'small' | 'medium' | 'large';
  disabled?: boolean;
  ariaLabel?: string;
}
```

### Input Component

```typescript
interface InputProps {
  type: 'text' | 'number' | 'email';
  value: string | number;
  onChange: (value: string | number) => void;
  label: string;
  placeholder?: string;
  error?: string;
  required?: boolean;
}
```

### Card Component

```typescript
interface CardProps {
  children: React.ReactNode;
  title?: string;
  className?: string;
}
```

---

## ğŸ¯ Component Hierarchy

```
App
â”œâ”€â”€ DaysSelector
â”‚   â”œâ”€â”€ Input (number)
â”‚   â”œâ”€â”€ VoiceInputButton
â”‚   â””â”€â”€ SubmitButton
â”œâ”€â”€ ConversationUI
â”‚   â”œâ”€â”€ MessageBubble (user)
â”‚   â”œâ”€â”€ MessageBubble (assistant)
â”‚   â””â”€â”€ LoadingSpinner
â”œâ”€â”€ GroceryList
â”‚   â”œâ”€â”€ CategorySection[]
â”‚   â”‚   â”œâ”€â”€ CategoryHeader
â”‚   â”‚   â””â”€â”€ GroceryItem[]
â”‚   â”œâ”€â”€ TotalCost
â”‚   â””â”€â”€ PrintButton
â””â”€â”€ RecipeList
    â””â”€â”€ RecipeCard[]
        â”œâ”€â”€ RecipeHeader
        â”œâ”€â”€ RecipeDetails (expandable)
        â”‚   â”œâ”€â”€ Ingredients
        â”‚   â””â”€â”€ Instructions
        â””â”€â”€ RecipeImage
```

---

## â™¿ Accessibility Checklist

### Every Component Must Have:
- [ ] ARIA labels where needed
- [ ] Keyboard navigation
- [ ] Focus indicators
- [ ] Screen reader support
- [ ] High contrast support
- [ ] Reduced motion support

### Testing
- [ ] Test with NVDA/JAWS/VoiceOver
- [ ] Test keyboard-only navigation
- [ ] Test with high contrast mode
- [ ] Test with reduced motion

---

## ğŸ“ Implementation Guidelines

### File Structure
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ DaysSelector.jsx
â”‚   â”œâ”€â”€ ConversationUI.jsx
â”‚   â”œâ”€â”€ GroceryList.jsx
â”‚   â”œâ”€â”€ RecipeCard.jsx
â”‚   â””â”€â”€ LoadingSpinner.jsx
â”œâ”€â”€ components/ui/
â”‚   â”œâ”€â”€ Button.jsx
â”‚   â”œâ”€â”€ Input.jsx
â”‚   â””â”€â”€ Card.jsx
â””â”€â”€ components/accessibility/
    â”œâ”€â”€ ScreenReaderOnly.jsx
    â””â”€â”€ SkipLink.jsx
```

### Styling
- Use Tailwind CSS for styling
- Follow design system tokens
- Ensure 7:1 contrast for text
- Use semantic HTML

### State Management
- Use React hooks (useState, useEffect)
- Consider Context API for global state
- Keep components focused and simple

---

## ğŸ“š Related Documents

- [02-design-principles.mdc](./02-design-principles.mdc) - Design decisions
- [05-accessibility-requirements.mdc](./05-accessibility-requirements.mdc) - Accessibility specs
- [06-technical-architecture.mdc](./06-technical-architecture.mdc) - System architecture

---

**Last updated**: December 20, 2024

